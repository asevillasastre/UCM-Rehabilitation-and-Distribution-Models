GAMS 41.2.0  5110e5ff Nov 14, 2022          WEX-WEI x86 64bit/MS Windows - 01/21/23 17:40:06 Page 1
modelo sencillo reconstruccion + reparto 1
C o m p i l a t i o n


   2   
   3  Set
   4  j Nodos. Representan los asentamientos. /0*6/
   5  t Periodos. Se asumen de misma duracion ademas de que todos los arcos se pueden recorrer en uno de estos periodos
   6   /0*6/
   7  v Tipos de vehiculo /0*1/
   8  ;
   9   
  10  Alias
  11  (j,i,k)
  12  ;
  13   
  14  Parameters
  15  dem(j) Demanda por cada asentamiento de un  unico recurso en toneladas
  16                          /0 0,
  17                           1 1,
  18                           2 1,
  19                           3 1,
  20                           4 8,
  21                           5 4,
  22                           6 4/
  23  max_coste Maximo presupuesto que se puede invertir
  24   /45/
  25  max_puentes Maximo numero de puentes que podemos reconstruir previo paso (un puente por cada sentido consideramos un grafo orientado)
  26   /2/
  27  capacidad_vehiculo(v) Capacidad de hacer partir 1 vehiculo de tipo v /0 1,1 2/
  28  coste_vehiculo(v) Coste total y fijo de hacer partir 1 vehiculo de tipo v /0 10,1 15/
  29  P_total Probabilidad aceptable de que todos los convoys puedan pasar por todas las rutas elegidas
  30  /0.3/
  31  ;
  32   
  33  Table E(i,j) Existe la ruta de i a j
  34      0   1   2   3   4   5   6
  35  0   0   1   1   1   0   1   0
  36  1   1   0   0   0   0   0   0
  37  2   1   0   0   0   0   0   0
  38  3   1   0   0   0   1   0   0
  39  4   0   0   0   1   0   0   0
  40  5   1   0   0   0   0   0   1
  41  6   0   0   0   0   0   1   0
  42  ;
  43   
  44  Table U(i,j) Al inicio es utilizable la ruta de i a j
  45      0   1   2   3   4   5   6
  46  0   0   1   0   1   0   0   0
  47  1   1   0   0   0   0   0   0
  48  2   0   0   0   0   0   0   0
  49  3   1   0   0   0   0   0   0
  50  4   0   0   0   0   0   0   0
  51  5   0   0   0   0   0   0   1
  52  6   0   0   0   0   0   1   0
  53  ;
  54   
  55  Table P(i,j) Probabilidad de que la ruta de i a j sea usable
  56      0   1   2   3   4   5   6
  57  0   1   0.9 0.5 0.3 1   0.7 1
  58  1   0.9 1   1   1   1   1   1
  59  2   0.5 1   1   1   1   1   1
  60  3   0.3 1   1   1   0.4 1   1
  61  4   1   1   1   0.4 1   1   1
  62  5   0.7 1   1   1   1   1   0.6
  63  6   1   1   1   1   1   0.6 1
  64  ;
  65   
  66  Variables
  67  X(i,j,t,v)  Vehiculos de tipo v que van de i a j en el periodo t
  68   
  69  Y(j,t,v) Vehiculos de tipo v que hay en j en el periodo t. Pueden seguir su ruta o bien quedarse en j para proseguir su ruta en otro periodo o bien permanecer en j hasta el final del ultimo periodo
  70   
  71  Z(j,v) Vehiculos de tipo v totales emplazados en j al final del ultimo periodo. se asume que en ese momento hacen el reparto a j
  72   
  73  Z_(j) Ayuda total repartida a j
  74   
  75  auxZ(j) Variable binaria que representa si se reparte al menos un vehiculo de recurso a j
  76   
  77  H(i,j) variable binaria que determina si habilitamos el puente de i a j
  78   
  79  Coste Coste total del proyecto
  80   
  81  Used(i,j)
  82   
  83  Ayuda Total demanda satisfecha
  84  Eq Criterio de equidad. Numero de nodos a los que se reparte al menos un vehiculo
  85  ;
  86   
  87  Integer variables X, Y, Z;
  88  Binary variables auxZ, H, Used;
  89   
  90  Equations
  91   
  92  definir_Y(j,t,v) Restriccion de almacenamiento. En cierto nodo permanece lo almacenado en el anterior periodo mas lo que entra a el en el presente menos lo que sale
  93   
  94  definir_Z(j,v) Determina lo repartido como lo ubicado en cierto nodo en el ultimo periodo
  95   
  96  definir_Z_(j) Lo repartido a j en toneladas
  97   
  98  definir_auxZ(j)
  99   
 100  lim_salida(j,t,v) Limita los vehiculos que pueden salir de un nodo a las almacenados en el mismo
 101  flujo_ini(j,v) No hay almacenado nada en ningun nodo no inicial
 102  flujo_ini_0 En el nodo inicial esta almacenada la totalidad de los camiones
 103   
 104  existencia_ruta(i,j,t,v)
 105  usabilidad_ruta(i,j,t,v)
 106  orientacion(i,j) Si se habilita un sentido se ha de habilitar el opuesto
 107  lim_puentes Limite de puentes que podemos reconstruir
 108   
 109  lim_demanda(j) No se puede superar la demanda
 110   
 111  arco_usado(i,j) Pasa algun vehiculo por este nodo
 112  arco_usado_orientacion(i,j)
 113  fiabilidad Restriccion que impide elegir alguna ruta que tenga mas de cierta probabilidad de no ser usable
 114   
 115  f_ayuda Funcion objetivo 1. Cantidad total del recurso repartida en cierta unidad
 116  f_equidad Funcion objetivo 2.  Criterio de equidad. Numero de nodos a los que se les reparte al menos una unidad de recurso
 117  ;
 118   
 119  definir_Y(j,t,v)$(ord(t)>1).. Y(j,t,v) =E=
 120                              Y(j,t-1,v) + sum(i, X(i,j,t,v)) - sum(i, X(j,i,t,v));
 121  definir_Z(j,v).. Z(j,v) =E= Y(j,"3",v);
 122  definir_Z_(j).. Z_(j) =E= sum(v, Z(j,v)*capacidad_vehiculo(v));
 123  definir_auxZ(j).. auxZ(j) =L= Z_(j);
 124   
 125  lim_salida(j,t,v).. sum(i,X(j,i,t,v)) =L= Y(j,t-1,v);
 126  flujo_ini(j,v)$(ord(j)>1).. Y(j,"0",v) =E= 0;
 127  flujo_ini_0.. sum(v,Y("0","0",v)*coste_vehiculo(v)) =L= max_coste;
 128  existencia_ruta(i,j,t,v).. X(i,j,t,v) =L= 99*E(i,j);
 129  usabilidad_ruta(i,j,t,v).. X(i,j,t,v) =L= 99*(U(i,j) +  H(i,j));
 130  orientacion(i,j).. H(i,j) =E= H(j,i);
 131  lim_puentes..  sum(i, sum(j, H(i,j))) =L= max_puentes;
 132   
 133  lim_demanda(j).. Z_(j) =L= dem(j);
 134   
 135  arco_usado(i,j).. 99*Used(i,j) =G= sum(t, sum(v, X(i,j,t,v)));
 136  arco_usado_orientacion(i,j).. Used(i,j)=E= Used(j,i);
 137  fiabilidad.. sum(i, sum(j, Used(i,j)*log2(P(i,j)))) =G= log2(P_total);
 138   
 139  f_ayuda.. Ayuda =E= sum(j, Z_(j)-dem(j));
 140  f_equidad.. Eq =E= sum(j, auxZ(j));
 141  ;
 142   
 143  model modelo1 /all/;
 144   
 145  solve modelo1 using MIP maximizing Ayuda
 146  ;
 147  solve modelo1 using MIP maximizing Eq
 148  ;
 149   
 150   
 151  *con 2 tipos de vehiculos
 152  *---   1,647 rows  863 columns  4,237 non-zeroes
 153  *---   854 discrete-columns
 154  *utiliza vehiculos y puentes distintos (los de menor capacidad para mayor equidad)
 155   
 156  *con 3 tipos de vehiculos:
 157  *---   2,437 rows  1,262 columns  6,267 non-zeroes
 158  *---   1,253 discrete-columns
 159  *The model exceeds the demo license limits for linear models of more than 2000 rows or columns
 160   
 161   


COMPILATION TIME     =        0.047 SECONDS      3 MB  41.2.0 5110e5ff WEX-WEI


USER: GAMS Demo license for Antonio Sevilla Sastre   G221121|0002CO-GEN
      UCM, Spain                                               DL079880


**** FILE SUMMARY

Input      G:\Mi unidad\TFG\src\modelo_ijt_vehiculos_fiabilidad.gms
Output     G:\Mi unidad\TFG\src\modelo_ijt_vehiculos_fiabilidad.lst
